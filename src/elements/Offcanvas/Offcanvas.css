/* ========================================
   OFFCANVAS COMPONENT - OUTLINE-BASED UI
   Adaptado desde Material Design
   ======================================== */

/* ========================================
   TOGGLE BUTTON - OUTLINE STYLE
   ======================================== */

/* Toggle button - Border circular en vez de fondo */
.wc-offcanvas-toggle {
  @apply cursor-pointer p-2 rounded-full;
  @apply transition-all duration-200;

  /* Reemplazo de bg por border */
  @apply bg-transparent;
  @apply border border-outline/40;
}

.wc-offcanvas-toggle:hover {
  @apply border-outline/80; /* Incremento de contraste */
  @apply bg-transparent; /* Sin fondo hover */
}

.wc-offcanvas-toggle:active {
  @apply border-outline; /* Contraste máximo */
  @apply scale-95; /* Feedback táctil sutil */
}

/* Focus visible para accesibilidad */
.wc-offcanvas-toggle:focus-visible {
  @apply outline-2 outline-primary outline-offset-2;
  @apply border-primary/60;
}

/* Toggle Icon */
.wc-offcanvas-toggle-icon {
  @apply block h-6 w-6;
  @apply icon-[garden--menu-stroke-16];
  @apply text-onSurfaceVariant;
  @apply transition-transform duration-200;
}

.wc-offcanvas-toggle:hover .wc-offcanvas-toggle-icon {
  @apply text-onSurface; /* Mayor contraste en hover */
}

/* Animación de ícono (X rotation effect) */
.wc-offcanvas-toggle--active .wc-offcanvas-toggle-icon {
  @apply rotate-90; /* Rotación cuando está abierto */
}

/* ========================================
   OVERLAY - Reducción de opacidad
   ======================================== */

/* Overlay más sutil (menos scrim) */
.wc-offcanvas-overlay {
  @apply fixed top-0 left-0 w-full h-full z-50;
  @apply bg-scrim/30; /* Reducido de 50% a 30% */
  @apply transition-opacity duration-300;

  /* Backdrop blur mínimo (outline style) */
  @apply backdrop-blur-sm; /* 4px en vez de sin blur */
  -webkit-backdrop-filter: blur(4px);
}

/* Animación de entrada */
.wc-offcanvas-overlay {
  animation: wc-offcanvas-fade-in 300ms ease-out;
}

@keyframes wc-offcanvas-fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* ========================================
   PANEL - ESTRUCTURA CON BORDES
   ======================================== */

/* Panel principal - Sin fondo sólido, con borde */
.wc-offcanvas-panel {
  @apply absolute top-0 left-0 h-full w-80 p-6 z-1;
  @apply transition-all duration-300 ease-out;

  /* Reemplazo de bg sólido por transparente + border */
  @apply bg-surface/95; /* Semi-transparente en vez de opaco */
  @apply backdrop-blur-md; /* Blur moderado para legibilidad */
  -webkit-backdrop-filter: blur(12px);

  /* Border derecho como estructura */
  @apply border-r-2 border-outline/30;
}

/* Shadow sutil (opcional, puede removerse totalmente) */
.wc-offcanvas-panel {
  @apply shadow-[4px_0_12px_rgba(0,0,0,0.08)]; /* Sombra muy sutil */
}

/* Animación de slide-in */
.wc-offcanvas-panel {
  animation: wc-offcanvas-slide-in 300ms ease-out;
}

@keyframes wc-offcanvas-slide-in {
  from {
    transform: translateX(-100%);
  }
  to {
    transform: translateX(0);
  }
}

/* Hover state en el panel completo */
.wc-offcanvas-panel:hover {
  @apply border-r-outline/50; /* Mayor contraste */
}

/* ========================================
   VARIANTES DE POSICIÓN
   ======================================== */

/* Right side offcanvas */
.wc-offcanvas-panel--right {
  @apply left-auto right-0;
  @apply border-r-0 border-l-2 border-outline/30;
  animation: wc-offcanvas-slide-in-right 300ms ease-out;
}

@keyframes wc-offcanvas-slide-in-right {
  from {
    transform: translateX(100%);
  }
  to {
    transform: translateX(0);
  }
}

/* Top offcanvas (drawer style) */
.wc-offcanvas-panel--top {
  @apply top-0 left-0 right-0 w-full h-auto max-h-[80vh];
  @apply border-r-0 border-b-2 border-outline/30;
  animation: wc-offcanvas-slide-in-top 300ms ease-out;
}

@keyframes wc-offcanvas-slide-in-top {
  from {
    transform: translateY(-100%);
  }
  to {
    transform: translateY(0);
  }
}

/* Bottom offcanvas */
.wc-offcanvas-panel--bottom {
  @apply top-auto bottom-0 left-0 right-0 w-full h-auto max-h-[80vh];
  @apply border-r-0 border-t-2 border-outline/30;
  animation: wc-offcanvas-slide-in-bottom 300ms ease-out;
}

@keyframes wc-offcanvas-slide-in-bottom {
  from {
    transform: translateY(100%);
  }
  to {
    transform: translateY(0);
  }
}

/* ========================================
   CLOSE BUTTON - OUTLINE STYLE
   ======================================== */

/* Close button - Solo borde circular */
.wc-offcanvas-close {
  @apply absolute right-4 top-4;
  @apply cursor-pointer p-2 rounded-full;
  @apply transition-all duration-200;

  /* Border en vez de background */
  @apply bg-transparent;
  @apply border border-outline/40;
}

.wc-offcanvas-close:hover {
  @apply border-outline/80;
  @apply bg-transparent;
  @apply rotate-90; /* Rotación en hover (efecto X) */
}

.wc-offcanvas-close:active {
  @apply border-outline;
  @apply scale-90;
}

/* Focus state */
.wc-offcanvas-close:focus-visible {
  @apply outline-2 outline-primary outline-offset-2;
  @apply border-primary/60;
}

/* Close Icon */
.wc-offcanvas-close-icon {
  @apply block h-6 w-6;
  @apply icon-[garden--x-stroke-16];
  @apply text-onSurfaceVariant;
  @apply transition-colors duration-200;
}

.wc-offcanvas-close:hover .wc-offcanvas-close-icon {
  @apply text-onSurface;
}

/* ========================================
   CONTENT AREA - ESTRUCTURA INTERNA
   ======================================== */

/* Content con separador superior */
.wc-offcanvas-content {
  @apply pt-12;
  @apply flex flex-col gap-4;

  /* Línea divisoria superior opcional */
  @apply border-t border-outline/20;
  @apply mt-12; /* Espacio desde el close button */
}

/* Scroll interno con indicadores visuales */
.wc-offcanvas-content {
  @apply overflow-y-auto;
  @apply max-h-[calc(100vh-6rem)];

  /* Scrollbar styling (webkit) */
  scrollbar-width: thin;
  scrollbar-color: theme("colors.outline.DEFAULT / 0.3") transparent;
}

.wc-offcanvas-content::-webkit-scrollbar {
  @apply w-1;
}

.wc-offcanvas-content::-webkit-scrollbar-track {
  @apply bg-transparent;
}

.wc-offcanvas-content::-webkit-scrollbar-thumb {
  @apply bg-outline/30 rounded-full;
}

.wc-offcanvas-content::-webkit-scrollbar-thumb:hover {
  @apply bg-outline/50;
}

/* Fade gradient en scroll (top y bottom) */
.wc-offcanvas-content::before,
.wc-offcanvas-content::after {
  content: "";
  @apply absolute left-0 right-0 h-8 pointer-events-none z-10;
}

.wc-offcanvas-content::before {
  @apply top-0;
  @apply bg-gradient-to-b from-surface/95 to-transparent;
}

.wc-offcanvas-content::after {
  @apply bottom-0;
  @apply bg-gradient-to-t from-surface/95 to-transparent;
}

/* ========================================
   HEADER Y FOOTER INTERNOS (OPCIONALES)
   ======================================== */

/* Header del offcanvas con línea divisoria */
.wc-offcanvas__header {
  @apply pb-4 mb-4;
  @apply border-b border-outline/30;
  @apply flex items-center justify-between;
}

.wc-offcanvas__title {
  @apply text-lg font-medium;
  @apply text-onSurface;
  @apply tracking-tight;
}

/* Footer del offcanvas con línea superior */
.wc-offcanvas__footer {
  @apply pt-4 mt-auto;
  @apply border-t border-outline/30;
  @apply flex items-center justify-end gap-3;
}

/* ========================================
   NAVIGATION ITEMS (CONTENIDO TÍPICO)
   ======================================== */

/* Lista de navegación con separadores */
.wc-offcanvas__nav {
  @apply flex flex-col gap-0;
  @apply list-none m-0 p-0;
}

.wc-offcanvas__nav-item {
  @apply block;
}

.wc-offcanvas__nav-link {
  @apply block py-3 px-4;
  @apply text-onSurface no-underline;
  @apply transition-all duration-200;
  @apply relative;

  /* Border left como indicador de hover/active */
  @apply border-l-2 border-transparent;
}

.wc-offcanvas__nav-link:hover {
  @apply text-primary;
  @apply border-l-primary/40;
  @apply bg-surfaceContainerLow; /* Tinte mínimo */
}

.wc-offcanvas__nav-link--active {
  @apply text-primary;
  @apply border-l-primary;
  @apply font-medium;
  @apply bg-transparent;
}

/* Focus state */
.wc-offcanvas__nav-link:focus-visible {
  @apply outline-2 outline-primary outline-offset-[-2px];
  @apply rounded-sm;
}

/* Separadores entre items */
.wc-offcanvas__nav-item:not(:last-child) {
  @apply border-b border-outline/10;
}

/* ========================================
   VARIANTES DE ESTILO
   ======================================== */

/* Minimal - Sin blur, solo bordes */
.wc-offcanvas-panel--minimal {
  @apply bg-surface; /* Fondo sólido */
  @apply backdrop-blur-none;
  @apply border-r-2 border-outline/50; /* Border más visible */
}

/* Glass - Máximo blur y transparencia */
.wc-offcanvas-panel--glass {
  @apply bg-surface/70; /* Más transparente */
  @apply backdrop-blur-xl; /* Blur máximo */
  -webkit-backdrop-filter: blur(24px);
  @apply border-r-2 border-outline/20; /* Border muy sutil */
}

/* Bordered - Border grueso como feature */
.wc-offcanvas-panel--bordered {
  @apply bg-surface;
  @apply backdrop-blur-none;
  @apply border-r-4 border-primary; /* Border de acento grueso */
}

/* Outlined - Solo contorno, sin fondo */
.wc-offcanvas-panel--outlined {
  @apply bg-transparent;
  @apply backdrop-blur-lg;
  @apply border-r-2 border-outline;
  @apply shadow-none; /* Sin sombra */
}

/* ========================================
   TAMAÑOS
   ======================================== */

/* Narrow (280px) */
.wc-offcanvas-panel--narrow {
  @apply w-70; /* 280px */
}

/* Default (320px / 80 = default) */
.wc-offcanvas-panel--default {
  @apply w-80; /* 320px */
}

/* Wide (400px) */
.wc-offcanvas-panel--wide {
  @apply w-100; /* 400px */
}

/* Full (100% hasta max) */
.wc-offcanvas-panel--full {
  @apply w-full max-w-md;
}

/* ========================================
   RESPONSIVE
   ======================================== */

/* Mobile: Full width con padding reducido */
@media (max-width: 640px) {
  .wc-offcanvas-panel {
    @apply w-full max-w-[90vw];
    @apply p-4;
    @apply border-r-0; /* Sin border en mobile */
  }

  .wc-offcanvas-panel--right {
    @apply border-l-0;
  }

  .wc-offcanvas-close {
    @apply right-2 top-2; /* Más cerca del borde */
  }
}

/* Tablet: Ancho reducido */
@media (min-width: 641px) and (max-width: 1024px) {
  .wc-offcanvas-panel--wide {
    @apply w-80; /* Reducir a default en tablet */
  }
}

/* ========================================
   ACCESIBILIDAD
   ======================================== */

/* High contrast mode */
@media (prefers-contrast: high) {
  .wc-offcanvas-panel {
    @apply border-r-2 border-outline;
  }

  .wc-offcanvas-toggle,
  .wc-offcanvas-close {
    @apply border-2 border-outline;
  }

  .wc-offcanvas__nav-link {
    @apply border-l-4; /* Bordes más gruesos */
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .wc-offcanvas-overlay,
  .wc-offcanvas-panel,
  .wc-offcanvas-toggle,
  .wc-offcanvas-close,
  .wc-offcanvas__nav-link {
    @apply transition-none;
    animation: none !important;
  }

  .wc-offcanvas-close:hover {
    @apply rotate-0; /* Sin rotación */
  }
}

/* Dark mode adjustments */
@media (prefers-color-scheme: dark) {
  .wc-offcanvas-panel {
    @apply border-r-outline/40; /* Más visible en dark */
  }

  .wc-offcanvas-overlay {
    @apply bg-scrim/40; /* Más oscuro */
  }
}

/* ========================================
   UTILITIES
   ======================================== */

/* Prevent scroll cuando offcanvas está abierto */
body.wc-offcanvas-open {
  @apply overflow-hidden;
}

/* Smooth scroll restoration */
body.wc-offcanvas-open {
  scroll-behavior: auto;
}

/* ========================================
   ANIMACIONES ADICIONALES
   ======================================== */

/* Fade out animation */
@keyframes wc-offcanvas-fade-out {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

/* Slide out animations */
@keyframes wc-offcanvas-slide-out {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(-100%);
  }
}

@keyframes wc-offcanvas-slide-out-right {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(100%);
  }
}

/* Clases para animación de salida */
.wc-offcanvas-overlay--closing {
  animation: wc-offcanvas-fade-out 300ms ease-in;
}

.wc-offcanvas-panel--closing {
  animation: wc-offcanvas-slide-out 300ms ease-in;
}

.wc-offcanvas-panel--right.wc-offcanvas-panel--closing {
  animation: wc-offcanvas-slide-out-right 300ms ease-in;
}

/* ========================================
   ESTADOS ESPECIALES
   ======================================== */

/* Loading state */
.wc-offcanvas-panel--loading {
  @apply pointer-events-none;
}

.wc-offcanvas-panel--loading::after {
  content: "";
  @apply absolute inset-0;
  @apply bg-surface/50;
  @apply flex items-center justify-center;
  @apply backdrop-blur-sm;
}

/* Disabled state */
.wc-offcanvas-toggle:disabled {
  @apply opacity-40;
  @apply cursor-not-allowed;
  @apply border-outline/20;
}

.wc-offcanvas-toggle:disabled:hover {
  @apply border-outline/20;
  @apply scale-100;
}

/* ========================================
   INTEGRACIÓN CON OTROS COMPONENTES
   ======================================== */

/* Offcanvas dentro de navbar */
.wc-navbar .wc-offcanvas-toggle {
  @apply border-outline/30; /* Más sutil en navbar */
}

/* Offcanvas con search */
.wc-offcanvas__search {
  @apply mb-4 pb-4;
  @apply border-b border-outline/20;
}

.wc-offcanvas__search input {
  @apply w-full p-3;
  @apply bg-transparent;
  @apply border border-outline/40 rounded-lg;
  @apply text-onSurface;
  @apply transition-all duration-200;
}

.wc-offcanvas__search input:focus {
  @apply outline-2 outline-primary outline-offset-0;
  @apply border-primary/60;
}

/* Offcanvas con user profile */
.wc-offcanvas__profile {
  @apply flex items-center gap-3 p-4;
  @apply mb-4;
  @apply border border-outline/30 rounded-lg;
}

.wc-offcanvas__profile-avatar {
  @apply w-12 h-12 rounded-full;
  @apply border-2 border-outline/40;
  @apply object-cover;
}

.wc-offcanvas__profile-info {
  @apply flex-1 min-w-0;
}

.wc-offcanvas__profile-name {
  @apply font-medium text-onSurface;
  @apply truncate;
}

.wc-offcanvas__profile-email {
  @apply text-sm text-onSurfaceVariant;
  @apply truncate;
}

/* ========================================
   MICRO-INTERACCIONES
   ======================================== */

/* Ripple effect en nav items (opcional) */
.wc-offcanvas__nav-link {
  position: relative;
  overflow: hidden;
}

.wc-offcanvas__nav-link::before {
  content: "";
  @apply absolute inset-0;
  @apply bg-primary/0;
  @apply transition-all duration-300;
  transform: scale(0);
  border-radius: 50%;
}

.wc-offcanvas__nav-link:active::before {
  @apply bg-primary/10;
  transform: scale(2);
}

/* Badge notification en nav items */
.wc-offcanvas__nav-badge {
  @apply absolute right-4 top-1/2 -translate-y-1/2;
  @apply w-2 h-2 rounded-full;
  @apply bg-error;
  @apply border border-surface;
}

/* Counter badge */
.wc-offcanvas__nav-counter {
  @apply ml-auto;
  @apply px-2 py-0.5;
  @apply text-xs font-medium;
  @apply bg-transparent;
  @apply border border-primary/40 rounded-full;
  @apply text-primary;
}
